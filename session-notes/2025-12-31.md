# Session Notes - 2025-12-31

## Completed

- **Fixed cookie consent / promo bar stacking issue**: When both elements are visible, the cookie consent now appears above the promo bar instead of overlapping
  - Added `.above-promo` CSS class with responsive bottom offsets (60px desktop, 55px tablet, 50px mobile)
  - Updated JavaScript on 4 pages (index.html, htma.html, services/services.html, services/lab-review.html) to detect promo bar visibility and adjust cookie consent position
  - Uses MutationObserver to handle promo bar dismissal

- **Fixed Contact FAQ portal link**: Updated the "How do I book a free consultation?" FAQ to use `data-portal` attribute for proper redirect flow with branded overlay (was linking directly to signin)

- **Fixed BDScript font rendering issue**: "Contact Alicia" heading was showing fallback font for uppercase C and A on some devices (iPad)
  - Diagnosed missing characters in font subset
  - Regenerated `/fonts/BDScript-subset.ttf` to include uppercase C and A
  - Updated CSS comment to document new character set: `S T I P C A e r v i c s h n t o a l m p . (space)`

- **Added BDScript subset documentation to CLAUDE.md**: Future-proofing note requiring character verification when adding new BDScript text

- **Integrated MailerLite for email marketing**: Newsletter and lead magnet forms now submit to MailerLite via secure Netlify Function
  - Created `/netlify/functions/subscribe.js` - secure API proxy (keeps API key hidden)
  - Updated 4 forms to use MailerLite:
    - Homepage newsletter section → Newsletter Subscribers group
    - Homepage exit-intent popup → Both groups (Holistic Habits Checklist + Newsletter)
    - Blog sidebar newsletter → Newsletter Subscribers group
    - Blog bottom popup → Newsletter Subscribers group
  - Added MailerLite form handler to `js/main.js`
  - API key stored securely in Netlify environment variables
  - Full documentation added to CLAUDE.md

## Files Changed

- `css/main.css` - Added `.above-promo` class, updated BDScript subset comment
- `index.html` - Updated cookie consent JS, updated newsletter and popup forms for MailerLite
- `htma.html` - Updated cookie consent JS for promo bar awareness
- `services/services.html` - Updated cookie consent JS for promo bar awareness
- `services/lab-review.html` - Updated cookie consent JS for promo bar awareness
- `contact.html` - Fixed FAQ link to use `data-portal`
- `fonts/BDScript-subset.ttf` - Regenerated with uppercase C and A
- `blog/index.html` - Updated sidebar and bottom newsletter forms for MailerLite
- `js/main.js` - Added MailerLite form submission handler
- `netlify/functions/subscribe.js` - NEW: MailerLite API proxy function
- `CLAUDE.md` - Added BDScript subset docs and MailerLite integration docs
- `package.json` - Added subset-font dev dependency

## Pending

- Set up MailerLite automation to deliver Holistic Habits Checklist when subscriber joins that group
- Regenerate MailerLite API key (since it was shared in chat) and update Netlify env var

## Notes

- MailerLite Groups:
  - Newsletter Subscribers: `175195722960864384`
  - Holistic Habits Checklist: `175195632248554684`
- The font subsetting was done using the `subset-font` npm package
- Deploy previews and branch deploys are FREE on Netlify (only production costs 15 credits)
